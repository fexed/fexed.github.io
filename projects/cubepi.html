<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <base href="../" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="Works and projects of Federico Matteoni">
    <meta name="author" content="Federico Matteoni">

    <!-- Bootsrtap -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <script src="js/bootstrap.bundle.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>

    <!-- Favicons -->
    <link rel="icon" href="img/icon32.png" sizes="32x32" type="image/png">
    <link rel="icon" href="img/icon16.png" sizes="16x16" type="image/png">

    <!-- Theme -->
    <meta name="theme-color" content="#004680">

    <title>fexed | Projects | CubePi</title>
  </head>
  <body class="d-flex flex-column">
    <!-- navbar -->
    <div class="nav-scroller">
      <nav class="navbar navbar-expand navbar-dark bg-dark fixed-top">
        <a class="navbar-brand" href="projects/cubepi.html"><img src="img/icon_w.png" width="30" height="30"> fexed</a>
        <ul class = "navbar-nav mr-auto">
          <li class="nav-item">
            <a class="nav-link" href="index.html">Home</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="about.html">About</a>
          </li>
          <li class="nav-item active">
            <a class="nav-link" href="projects.html">Projects</a>
          </li>
        </ul>
      </nav>
    </div>
    <div class="mt-5"/>

    <!-- main body -->
    <div class="container mt-5 px-5">
      <div class="row mb-5">
        <div class"card py-3">
            <div class="card-body">
              <h4>CubePi</h4>
              <h6 class="card-subtitle mb-2 text-muted">A media center, made with a Raspberry Pi 3 B+ and an old Nintendo Gamecube</h6>
            </div>
        </div>
      </div>
      <div class="row mb-5">
        <div class"card py-3" style="width: 20rem;">
          <div class="card-body">
            <h4>Goal</h4>
            <img class="card-img-top" style="width: 14rem;" src="img/photos/cubepi/end.jpg" alt="result">
            <p><b>Build a transportable retrogaming console/media center</b>.<br>
            I want to preserve as much as possible the exterior of the Gamecube:
            no custom-made 3D printed panels and no external modification.<br>
            In addition, I want to reuse as many original parts as possibile:
            power supply unit and buttons aboce all else.</p>
          </div>
        </div>
        <div class"card py-3" style="width: 20rem;">
          <div class="card-body">
            <h4>What?</h4>
            <img class="card-img-top" style="width: 14rem;" src="img/photos/cubepi/scheme.jpg" alt="scheme">
            <p>In short: I took a Raspberry Pi, put it inside a Gamecube,
            installed RetroPie and started playing <i>old games</i>.<br>
            And watched YouTube between gaming sessions.</p>
          </div>
        </div>
        <div class"card py-3" style="width: 20rem;">
          <div class="card-body">
            <h4>Why?</h4>
            <h6 class="card-subtitle mb-2 text-muted">Why not?</h6>
            <p>I wanted a thing like this in my room since a long time: a highly
            transportable retrogaming console.<br>
            The Gamecube is a beautiful console and its interior is very
            spacious.<br>In addition, it's been unused since decades.</p>
          </div>
        </div>
      </div>
      <div class="row mb-5">
        <div class"card py-3">
          <div class="card-body">
            <h4>Requirements</h4>
            <h6 class="card-subtitle mb-2 text-muted">I linked the products I've bought and used in this specific build</h6>
              <ul class="list-group">
                <a href="https://www.raspberrypi.org/products/raspberry-pi-3-model-b-plus/" class="list-group-item list-group-item-action"><b>Raspberry Pi 3 B+</b></a>
                <a href="https://www.ebay.com/sch/i.html?_from=R40&_trksid=p2380057.m570.l1313.TR12.TRC2.A0.H0.XNintendo+Gamecube.TRS0&_nkw=Nintendo+Gamecube&_sacat=0" class="list-group-item list-group-item-action"><b>Nintendo Gamecube</b></a>
                <a href="https://www.amazon.it/gp/product/B06XSZ1293/ref=ppx_yo_dt_b_search_asin_title?ie=UTF8&psc=1" class="list-group-item list-group-item-action">HDMI extender</a>
                <a href="https://www.amazon.it/gp/product/B000E5CYW8/ref=ppx_yo_dt_b_search_asin_title?ie=UTF8&psc=1" class="list-group-item list-group-item-action">USB extender</a>
                <a href="https://www.amazon.it/gp/product/B01L3BQVUM/ref=ppx_yo_dt_b_search_asin_image?ie=UTF8&psc=1" class="list-group-item list-group-item-action">USB/Wireles keyboard</a>
                <a href="https://www.amazon.it/gp/product/B00PL271Y0/ref=ppx_yo_dt_b_search_asin_title?ie=UTF8&psc=1" class="list-group-item list-group-item-action">USB gamepad</a>
                <a href="https://www.amazon.com/ATLIN-Screwdriver-Security-Nintendo-Cartridges/dp/B01N3UO3V7" class="list-group-item list-group-item-action"><b>Gamebit Screwdriver</b></a>
                <span class="list-group-item">Cables, leds and buttons</span>
                <span class="list-group-item">Solder</span>
                <span class="list-group-item">Hot glue</span>
                <span class="list-group-item">...patience</span>
              </ul>
          </div>
        </div>
        <div class"card py-3">
          <div class="card-body">
            <img class="card-img-top" src="img/photos/cubepi/inside.jpg" alt="inside">
          </div>
        </div>
      </div>
      <div class="row mb-5">
        <div class"card py-3">
          <div class="card-body">
            <h4>First step: disassembling the cube</h4>
            <div class="px-1 mx-auto float-md-left">
              <img class="px-1 py-1 rounded mx-auto float-md-left" style="width: 14rem;" src="img/photos/cubepi/1.jpg" alt="inside"><br>
              <img class="px-1 py-1 rounded mx-auto float-md-left" style="width: 14rem;" src="img/photos/cubepi/2.jpg" alt="cable">
            </div>
            <p>
            Even though the Nintendo Gamecube is a console born during a time
            where "<b>easily disassembled = easily hacked</b>", I was surprised
            by how easy it is to tear apart this console (given that you have
            the right screwdriver!) and by how neatly organized the interior was:
            the motherboard was inside a dissipating metal cage and the big
            fan on the side helped mantain the interior very cool.<br>
            The mini-CD drive is a easy to remove block (thanks to an
            <a href="https://www.ifixit.com/Teardown/Nintendo+GameCube+Teardown/1727">iFixit guide</a>)<br> After I finished tearing apart the cube, I decided to keep the
            power supply unit and the fan for two main reasons: <b>the fan does a
            really good job at keeping a low temperature</b> (and letting me play heavy
            retrogames without worrying about the Pi) and <b>thanks to a
            <a href="https://www.instructables.com/id/Retropie-Gamecube-Case-Project/"> very precise Instructable</a>
            I found the correct pinout of the power supply</b>, so I managed to
            make a quick mini USB - Gamecube cable and saved yet another AC
            adapter. To make the power cable, I unsoldered from the motherboard the connector that linked to the Gamecube power supply.</p>
            <br><br>
            <p><i>Failing miserably</i>. So I removed all the pins, unsoldering them one by one, and I reinserted them one by one by hand in the
            plastic connector. Terrible, but <i>at least it works</i>.<br>
            I then soldered a mini USB cable to the right pins (+5V and bround, respectively pin 22 and 1).<br>
            <b>Attention</b>: make sure to use a short and thick wire. The first time I used a very long cable and the Pi
            continuosly went undervolt (yellow spark in the top-right corner). I remade the cable with only 4-5cm of length
            and never saw that spark again.<br>
            <i>Huge thanks to Simone Tolomei for the tips.</i>
            </p>
          </div>
        </div>
        <div class"card py-3">
          <div class="card-body">
            <h4>Second step: inserting the Raspberry Pi... and the cables</h4>
            <img class="px-1 rounded mx-auto float-md-right" style="width: 14rem;" src="img/photos/cubepi/4.jpg" alt="inside">
            <p>As said by <a href="https://www.youtube.com/user/thebenheckshow">The Ben Heck Show</a> many many times:
            <b>do not underestimate how much space is taken by the cables</b> especially considering extenders and the
            like. As much as I'd like to say "<i>I calculated every centimeter</i>", I only had an huge amount of luck:
            the extenders I bought, and in particulare the HDMI extender, barely fit inside and at the same time
            they lock the Raspberry Pi in place. So, without a single screw and by only cutting a few plastic pieces
            inside the Gamecube, <b>the Raspberry Pi and the cables are locked in place</b>.</p>
            <p>At this point, the project could be considered finished: the Gamecube is untouched, the Raspberry Pi
            fits perfectly. So let's boot up RetroPie and play something!<br>But, by searching a bit on the
            internet, I found a couple of very cool ideas that I wanted to try out: a <b>power on led</b> and
            a <b>reboot/reset button</b>.<br>This will require the use of the <b>GPIO pins</b>, <i>something I've never done
            and that's why I decided to do it</i>.</p>
          </div>
        </div>
      </div>

      <div class="row mb-5">
        <div class"card py-3">
          <div class="card-body">
            <h4>First optional step: the power on led</h4>
            <div class="px-1 mx-auto float-md-left">
              <img class="px-1 py-1 rounded mx-auto float-md-left" style="width: 14rem;" src="img/photos/cubepi/5.jpg" alt="led powered on"><br>
              <img class="px-1 py-1 rounded mx-auto float-md-left" style="width: 14rem;" src="img/photos/cubepi/6.jpg" alt="led hot glue">
            </div>
            <p>By using one of the two <a href="https://en.wikipedia.org/wiki/Universal_asynchronous_receiver-transmitter">UART</a> GPIO pins,
            particurarly the <a href="https://pinout.xyz/pinout/pin8_gpio14">pin 8</a>, and by putting <code>enable_uart=1</code> in <code>/boot/config.txt</code>,
            I attached a led that <b>automatically lights up when the Raspberry Pi is powered on</b> and <b>shuts of when the Raspberry Pi is completely shutted down</b>.<br>
            So, I can press the Gamecube's power button to power up everything, but I <i>should</i> do a <code>sudo poweroff</code> (from the terminal, from the Kodi menu,
            from the Emulation Station menu...) and <b>wait for the led to shut down</b> before pressing the power button to shut of the current. <br><br>
            I want to automatize this in the future.</p>
            <p>I linked the led to the GPIO 8 and 6, for respectively the + and - of the led, and I locked the led to the top of the Gamecube with <i>a lot</i> of
            hot glue. Maybe I used too much glue but the important part is that the led should stay in place: many times I removed the top shell and some
            cables detached, but the led stayed in place.</p>
          </div>
        </div>
        <div class"card py-3">
          <div class="card-body">
            <h4>Second optional step: the reboot button</h4>
            <img class="px-1 rounded mx-auto float-md-left" style="width: 14rem;" src="img/photos/cubepi/8.jpg" alt="button">
            <p>I recycled the original reset button, which was soldered on the front circuit board (which contains the joypad ports). The reasons are simple: <br>
            <b>it's a sping-loaded button</b>, so it keeps high in place the plastic button on the shell, and being the original button <b>I can easily put it
            in the original position.</b></p>
            <p>Thanks to a few online guides, I decide to proceed like this: I linked the button to the +3.3v (<a href="https://pinout.xyz/pinout/pin1_3v3_power">pin 1</a>)
            and to the <a href="https://pinout.xyz/pinout/pin11_gpio17">pin 11</a>, and I wrote a simple Python script that, once per second, checks if the button is pressed in which case
            execs a <code>sudo reboot</code>. The script is launched when the system boots up (thanks to <code>/etc/rc.local</code> or a <code>cron @reboot</code>).<br>Here's the code: </p>
            <pre class="pre-scrollable">
              <code>
                import RPi.GPIO as GPIO
                import time
                import subprocess

                GPIO.setmode(GPIO.BCM)
                GPIO.setup(17, GPIO.IN,pull_up_down=GPIO.PUD_DOWN)

                bashCommand = "sudo reboot"

                try:
                    while True:
                         button_state = GPIO.input(17)
                         if button_state == True:
                             print "Exec"
                             process = subprocess.Popen(bashCommand.split(), stdout=subprocess.PIPE)
                             output, error = process.communicate()
                             time.sleep(1)
                except:
                    print "Exit"
              </code>
            </pre>
          </div>
        </div>
      </div>
      <div class="row mb-5">
        <div class"card py-3">
          <div class="card-body">
            <h4>Bonus round: controllers!</h4>
            <img class="px-1 rounded mx-auto float-md-left" style="width: 14rem;" src="img/photos/cubepi/11.jpg" alt="button">
            <img class="px-1 rounded mx-auto float-md-right" style="width: 14rem;" src="img/photos/cubepi/12.jpg" alt="button">
            <p>I decided that having only two SNES-like USB pads wasn't enought, and thanks to a <a href="https://www.amazon.it/gp/product/B074MP4FRD/ref=ppx_yo_dt_b_asin_title_o00_s00?ie=UTF8&psc=1">kit found on Amazon.it</a>,
            I tried to make a couple of arcade sticks. First time dealing with wood and with these controllers, so <i>why not?</i><br>
            Each kit had 10 buttons (8 big and 2 small), stick, USB board and <i>many cables</i>. Putting everything together was extremely simple, and if you have
            problems you can use the tags on the cables as a guide.<br>
            The order in which I linked the cables and oriented the stick wasn't important, because I had to reconfigure them in RetroPie (and there's the
            option to invert the axys in every system I know).</p>
            <p>Thanks to the help of a 3D printed mask I found on <a href="https://www.thingiverse.com/thing:2049637">Thingiverse</a>, I built two wooden cases. <br>
            For me this was the hardest part in the whole project, given that it was my first time doing such a thing on my own. The result is hideous but functional.</p>
          </div>
        </div>
      </div>
      <div class="row mb-5">
        <div class"card" style="width: 16rem;">
          <h4>Game over</h4>
          <h6 class="card-subtitle mb-2 text-muted">The CubePi is now ready to go!</h6>
          <img class="card-img-top" style="width: 14rem;" src="img/photos/cubepi/13.jpg" alt="Trying to make it work">
        </div>
        <div class"card" style="width: 16rem;">
          <h4>The kit</h4>
          <img class="card-img-top" style="width: 14rem;" src="img/photos/cubepi/9.jpg" alt="Trying to make it work">
        </div>
        <div class"card" style="width: 16rem;">
          <h4>Testing the cable</h4>
          <img class="card-img-top" style="width: 14rem;" src="img/photos/cubepi/3.jpg" alt="Trying to make it work">
        </div>
        <div class"card" style="width: 16rem;">
          <h4>Working</h4>
          <img class="card-img-top" style="width: 14rem;" src="img/photos/cubepi/10.jpg" alt="Trying to make it work">
        </div>
      </div>
    </div>

    <!-- footer -->
    <footer class="footer mt-auto py-3">
      <div class="container">
        <span class="text-muted">Powered by <a href="https://getbootstrap.com/">Bootstrap v4.5.0</a>, made by <b>Federico Matteoni</b></span>
      </div>
    </footer>
  </body>
</html>
